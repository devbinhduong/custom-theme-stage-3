"use strict";
(self["webpackChunkbigcommerce_hera"] = self["webpackChunkbigcommerce_hera"] || []).push([["assets_js_theme_blog_js-node_modules_node-fetch_browser_js"],{

/***/ "./assets/js/theme/blog.js":
/*!*********************************!*\
  !*** ./assets/js/theme/blog.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Blog)
/* harmony export */ });
/* harmony import */ var fancybox__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fancybox */ "./node_modules/@fancyapps/ui/src/Fancybox/Fancybox.js");
/* harmony import */ var _bigcommerce_stencil_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/stencil-utils */ "./node_modules/@bigcommerce/stencil-utils/src/main.js");
/* harmony import */ var _page_manager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./page-manager */ "./assets/js/theme/page-manager.js");
/* harmony import */ var _halothemes_haloAddOptionForProduct__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./halothemes/haloAddOptionForProduct */ "./assets/js/theme/halothemes/haloAddOptionForProduct.js");
/* harmony import */ var _halothemes_haloSidebarToggle__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./halothemes/haloSidebarToggle */ "./assets/js/theme/halothemes/haloSidebarToggle.js");
/* provided dependency */ var $ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.min.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }
function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }





var Blog = /*#__PURE__*/function (_PageManager) {
  _inheritsLoose(Blog, _PageManager);
  function Blog(context) {
    return _PageManager.call(this, context) || this;
  }
  var _proto = Blog.prototype;
  _proto.onReady = function onReady() {
    (0,_halothemes_haloSidebarToggle__WEBPACK_IMPORTED_MODULE_4__["default"])();
    this.loadOptionForProductCard(this.context);
    /* Animate Scroll*/
    this.animationScroll();
    this.getBlogPostByTag(".blog-tab-content__post--recenzii");
    this.getBlogPostByTag(".blog-tab-content__post--recomandari");
    this.getBlogPostByTag(".blog-tab-content__post--incurajare");
    this.getBlogPostByTag(".blog-tab-content__post--interviuri");
    this.viewMoreBlogCategory();
    this.getTimeBlog();
    this.similarArticle();
  };
  _proto.loadOptionForProductCard = function loadOptionForProductCard(context) {
    if ($('#featured-products .card').length > 0) {
      (0,_halothemes_haloAddOptionForProduct__WEBPACK_IMPORTED_MODULE_3__["default"])(context, 'featured-products');
    }
  }

  /* Animation Scroll */;
  _proto.animationScroll = function animationScroll() {
    var itemLink = $('.tab-title__link');
    if (!itemLink) return;
    var _loop = function _loop() {
      var item = _step.value;
      var tabTile = item.closest('.tab-title__item');
      item.addEventListener('click', function (e) {
        e.preventDefault();
        /* Active Tab */
        var tabTileActive = document.querySelector('.tab-title__item.active');
        if (tabTileActive) tabTileActive.classList.remove('active');
        tabTile.classList.add('active');
        /* Scroll */
        var itemHref = item.getAttribute('href');
        $('html, body').animate({
          scrollTop: $(itemHref).offset().top - 200
        }, 1000);
      });
    };
    for (var _iterator = _createForOfIteratorHelperLoose(itemLink), _step; !(_step = _iterator()).done;) {
      _loop();
    }
  }

  /* Get Post By Tag Name*/;
  _proto.getBlogPostByTag = function getBlogPostByTag(elementClass) {
    var blogList = document.querySelector(elementClass),
      blogSection = blogList == null ? void 0 : blogList.closest(".blog-tab__content"),
      blogUrl = blogSection == null ? void 0 : blogSection.querySelector(".blog-tab-content__link").getAttribute("href");
    if (!blogList) return;
    fetch(blogUrl).then(function (response) {
      return response.text();
    }).then(function (content) {
      var template = document.createElement('div');
      template.innerHTML = content;
      var newContent = template.querySelector(".blog-catagory-content").innerHTML;
      blogList.innerHTML = newContent;
    })

    /* Show 9 blog post on desktop */.then(function () {
      if (window.innerWidth > 768) {
        var blogPost = blogSection.querySelectorAll(".blog-tab-content__post .blog");
        for (var i = 0; i < blogPost.length; i++) {
          if (i > 8) {
            blogPost[i].remove();
          }
        }
      }
    })

    /* Show 3 blog post on mobile */.then(function () {
      if (window.innerWidth < 768) {
        var blogPost = blogSection.querySelectorAll(".blog-tab-content__post .blog");
        for (var i = 0; i < blogPost.length; i++) {
          if (i > 2) {
            blogPost[i].remove();
          }
        }
      }
    }).then(function () {
      $(elementClass).slick({
        infinite: false,
        slidesToShow: 3,
        slidesToScroll: 3,
        arrows: false,
        draggable: true,
        dots: true,
        /* Responsive */
        responsive: [{
          breakpoint: 900,
          settings: {
            slidesToShow: 2,
            slidesToScroll: 2,
            dots: true
          }
        }, {
          breakpoint: 767,
          settings: {
            slidesToShow: 1,
            variableWidth: true,
            dots: true,
            slidesToScroll: 1
          }
        }]
      });
    }).then(function () {
      var dot = blogSection.querySelectorAll(".slick-dots li");
      dot[0].click();
    })

    /* Scroll To Top After Click Above */.then(function () {
      window.scrollTo(0, 0);
    })

    /* Get Reading Time */.then(function () {
      var haloDescription = document.querySelectorAll('.blog-post.halo-description');
      for (var _iterator2 = _createForOfIteratorHelperLoose(haloDescription), _step2; !(_step2 = _iterator2()).done;) {
        var description = _step2.value;
        var descriptionText = description.textContent.trim();
        var extractedText = descriptionText.match(/(\d+\smin\sde\scitit)/i);
        if (extractedText) {
          extractedText = extractedText[0];
          var blogPostBody = description.closest('.blog-post-body');
          var customBlogReading = blogPostBody.querySelector('.custom-blog-reading');
          customBlogReading.textContent = extractedText;
          description.textContent = description.textContent.replace(extractedText, '').trim();
        }
      }
    })

    /* Get Matching Tags for Custom Post Detail Layout */.then(function () {
      var postDetailCustom = document.querySelector(".custom-post-detail-layout");
      if (postDetailCustom) {
        var showMatchingTags = function showMatchingTags() {
          /* Get All Tags of this post */
          var tags = document.querySelectorAll('.custom-post-tags .link');
          tags.forEach(function (tag) {
            /* Get Tag Name */
            var tagName = tag.innerText.trim();

            /* Find Div the samee with tag name */
            var correspondingDiv = document.getElementById('blog-' + tagName.toLowerCase());
            if (correspondingDiv) {
              correspondingDiv.style.display = 'block';
            }
          });
        };
        showMatchingTags();
      }
    })["catch"](function (error) {
      console.error('Error:', error);
    });
  };
  _proto.viewMoreBlogCategory = function viewMoreBlogCategory() {
    var viewMoreButton = document.querySelector(".post-category-viewMore");
    var blogList = document.querySelector(".blog-catagory-content");
    if (!viewMoreButton) return;
    viewMoreButton.addEventListener("click", function (e) {
      e.preventDefault();
      var nextPage = $('.pagination-item--current').next(),
        link = nextPage.find("a").attr("href");
      fetch(link).then(function (response) {
        return response.text();
      }).then(function (content) {
        var template = document.createElement('div');
        template.innerHTML = content;
        var newContent = $(".blog-catagory-content .blog", $(template));
        var newPagination = $(".pagination-list", $(template));
        if (link) {
          $(newContent).appendTo(blogList);
        }
        $('.pagination-list').html(newPagination);
      })

      /* Remove View More Button */.then(function () {
        var nextPagination = document.querySelector(".pagination-item--next");
        if (!nextPagination) {
          viewMoreButton.style.display = "none";
        }
      })["catch"](function (error) {
        console.error('Error:', error);
      });
    });
  };
  _proto.getTimeBlog = function getTimeBlog() {
    var haloDescription = document.querySelectorAll('.blog-post.halo-description');
    var _loop2 = function _loop2() {
        descriptionText = haloDescription[i].innerHTML.trim();
        extractedText = descriptionText.match(/(\d+\smin\sde\scitit)/i);
        if (extractedText) {
          extractedText = extractedText[0];
          blogPostBody = haloDescription[i].closest('.blog');
          customBlogReading = blogPostBody.querySelector('.custom-blog-reading');
          customBlogReading.innerHTML = extractedText;

          /* Reading Time in blog detail page */
          var blogDetail = document.querySelector(".blog-post-detail .post-detail__top");
          if (blogDetail) {
            var convertTextToMinute = function convertTextToMinute(text) {
              var regex = /(\d+)\s*min\s+de\s+citit/;
              var match = text.match(regex);
              if (match && match[1]) {
                var minutes = parseInt(match[1]);
                return minutes + " minute";
              } else {
                return text;
              }
            };
            blogDetailReading = blogDetail.querySelector('.custom-blog-reading');
            var newReadingTime = convertTextToMinute(extractedText);
            if (i == 0) {
              blogDetailReading.innerHTML = convertTextToMinute(extractedText);
            }
          }
          haloDescription[i].innerHTML = haloDescription[i].innerHTML.replace(extractedText, '').trim();
        }
      },
      descriptionText,
      extractedText,
      blogPostBody,
      customBlogReading,
      blogDetailReading;
    for (var i = 0; i < haloDescription.length; i++) {
      _loop2();
    }
  };
  _proto.similarArticle = function similarArticle() {
    var _document$querySelect;
    var similarTagLink = (_document$querySelect = document.querySelector(".blog-post-tags .tags .tag .link")) == null ? void 0 : _document$querySelect.getAttribute("href");
    if (!similarTagLink) return;
    fetch(similarTagLink).then(function (response) {
      return response.text();
    }).then(function (content) {
      var template = document.createElement('div');
      template.innerHTML = content;
      var newContent = template.querySelector("#blog-listing-container .blog-tab__content .blog-catagory-content").innerHTML;
      newContent = newContent.split("<nav")[0];
      document.querySelector(".similar-blog__list").innerHTML = newContent;
    }).then(function () {
      var blogPost = document.querySelectorAll(".similar__wrapper .blog");
      for (var i = 0; i < blogPost.length; i++) {
        if (i > 2) {
          blogPost[i].remove();
        }
      }
    }).then(function () {
      var haloDescription = document.querySelectorAll('.similar__wrapper .blog-post.halo-description');
      for (var _iterator3 = _createForOfIteratorHelperLoose(haloDescription), _step3; !(_step3 = _iterator3()).done;) {
        var description = _step3.value;
        var descriptionText = description.textContent.trim();
        var extractedText = descriptionText.match(/(\d+\smin\sde\scitit)/i);
        if (extractedText) {
          extractedText = extractedText[0];
          var blogPostBody = description.closest('.similar__wrapper .blog-post-body');
          var customBlogReading = blogPostBody.querySelector('.similar__wrapper .custom-blog-reading');
          customBlogReading.textContent = extractedText;
          description.textContent = description.textContent.replace(extractedText, '').trim();
        }
      }
    }).then(function () {
      $(document).ready(function () {
        $('.similar-blog__list').slick({
          infinite: false,
          slidesToShow: 3,
          slidesToScroll: 3,
          arrows: false,
          draggable: true,
          dots: true,
          /* Responsive */
          responsive: [{
            breakpoint: 900,
            settings: {
              slidesToShow: 2,
              slidesToScroll: 2,
              dots: true
            }
          }, {
            breakpoint: 767,
            settings: {
              slidesToShow: 1,
              variableWidth: true,
              dots: true,
              slidesToScroll: 1
            }
          }]
        });
      });
    });
  };
  return Blog;
}(_page_manager__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./node_modules/node-fetch/browser.js":
/*!********************************************!*\
  !*** ./node_modules/node-fetch/browser.js ***!
  \********************************************/
/***/ ((module, exports, __webpack_require__) => {



// ref: https://github.com/tc39/proposal-global
var getGlobal = function () {
	// the only reliable means to get the global object is
	// `Function('return this')()`
	// However, this causes CSP violations in Chrome apps.
	if (typeof self !== 'undefined') { return self; }
	if (typeof window !== 'undefined') { return window; }
	if (typeof __webpack_require__.g !== 'undefined') { return __webpack_require__.g; }
	throw new Error('unable to locate global object');
}

var globalObject = getGlobal();

module.exports = exports = globalObject.fetch;

// Needed for TypeScript and Webpack.
if (globalObject.fetch) {
	exports["default"] = globalObject.fetch.bind(globalObject);
}

exports.Headers = globalObject.Headers;
exports.Request = globalObject.Request;
exports.Response = globalObject.Response;


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGhlbWUtYnVuZGxlLmNodW5rLmFzc2V0c19qc190aGVtZV9ibG9nX2pzLW5vZGVfbW9kdWxlc19ub2RlLWZldGNoX2Jyb3dzZXJfanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWtCO0FBQzZCO0FBQ047QUFDa0M7QUFDWjtBQUFBLElBRzFDSSxJQUFJLDBCQUFBQyxZQUFBO0VBQUFDLGNBQUEsQ0FBQUYsSUFBQSxFQUFBQyxZQUFBO0VBQ3JCLFNBQUFELEtBQVlHLE9BQU8sRUFBRTtJQUFBLE9BQ2pCRixZQUFBLENBQUFHLElBQUEsT0FBTUQsT0FBTyxDQUFDO0VBQ2xCO0VBQUMsSUFBQUUsTUFBQSxHQUFBTCxJQUFBLENBQUFNLFNBQUE7RUFBQUQsTUFBQSxDQUVKRSxPQUFPLEdBQVAsU0FBQUEsUUFBQSxFQUFVO0lBQ0hSLHlFQUFpQixDQUFDLENBQUM7SUFFbkIsSUFBSSxDQUFDUyx3QkFBd0IsQ0FBQyxJQUFJLENBQUNMLE9BQU8sQ0FBQztJQUMzQztJQUNBLElBQUksQ0FBQ00sZUFBZSxDQUFDLENBQUM7SUFFdEIsSUFBSSxDQUFDQyxnQkFBZ0IsQ0FBQyxtQ0FBbUMsQ0FBQztJQUMxRCxJQUFJLENBQUNBLGdCQUFnQixDQUFDLHNDQUFzQyxDQUFDO0lBQzdELElBQUksQ0FBQ0EsZ0JBQWdCLENBQUMscUNBQXFDLENBQUM7SUFDNUQsSUFBSSxDQUFDQSxnQkFBZ0IsQ0FBQyxxQ0FBcUMsQ0FBQztJQUU1RCxJQUFJLENBQUNDLG9CQUFvQixDQUFDLENBQUM7SUFFM0IsSUFBSSxDQUFDQyxXQUFXLENBQUMsQ0FBQztJQUVsQixJQUFJLENBQUNDLGNBQWMsQ0FBQyxDQUFDO0VBQ3pCLENBQUM7RUFBQVIsTUFBQSxDQUVERyx3QkFBd0IsR0FBeEIsU0FBQUEseUJBQXlCTCxPQUFPLEVBQUM7SUFDN0IsSUFBR1csQ0FBQyxDQUFDLDBCQUEwQixDQUFDLENBQUNDLE1BQU0sR0FBRyxDQUFDLEVBQUM7TUFDeENqQiwrRUFBdUIs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LElBQUksRUFBRSxJQUFJO2NBQ1ZILGNBQWMsRUFBRTtZQUNwQjtVQUNKLENBQUM7UUFFVCxDQUFDLENBQUM7TUFDTixDQUFDLENBQUM7SUFDTixDQUFDLENBQUM7RUFDVixDQUFDO0VBQUEsT0FBQTlELElBQUE7QUFBQSxFQXRXNkJILHFEQUFXOzs7Ozs7Ozs7OztBQ1BoQzs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDLHNDQUFzQztBQUN0QyxZQUFZLHFCQUFNLG9CQUFvQixPQUFPLHFCQUFNO0FBQ25EO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLENBQUMsa0JBQWU7QUFDaEI7O0FBRUEsZUFBZTtBQUNmLGVBQWU7QUFDZixnQkFBZ0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iaWdjb21tZXJjZS1oZXJhLy4vYXNzZXRzL2pzL3RoZW1lL2Jsb2cuanMiLCJ3ZWJwYWNrOi8vYmlnY29tbWVyY2UtaGVyYS8uL25vZGVfbW9kdWxlcy9ub2RlLWZldGNoL2Jyb3dzZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICdmYW5jeWJveCc7XG5pbXBvcnQgdXRpbHMgZnJvbSAnQGJpZ2NvbW1lcmNlL3N0ZW5jaWwtdXRpbHMnO1xuaW1wb3J0IFBhZ2VNYW5hZ2VyIGZyb20gJy4vcGFnZS1tYW5hZ2VyJztcbmltcG9ydCBoYWxvQWRkT3B0aW9uRm9yUHJvZHVjdCBmcm9tICcuL2hhbG90aGVtZXMvaGFsb0FkZE9wdGlvbkZvclByb2R1Y3QnO1xuaW1wb3J0IGhhbG9TaWRlYmFyVG9nZ2xlIGZyb20gJy4vaGFsb3RoZW1lcy9oYWxvU2lkZWJhclRvZ2dsZSc7XG5pbXBvcnQgeyBjb25mb3JtcyB9IGZyb20gJ2xvZGFzaCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJsb2cgZXh0ZW5kcyBQYWdlTWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IoY29udGV4dCkge1xuICAgICAgICBzdXBlcihjb250ZXh0KTtcbiAgICB9XG5cblx0b25SZWFkeSgpIHtcbiAgICAgICAgaGFsb1NpZGViYXJUb2dnbGUoKTtcblxuICAgICAgICB0aGlzLmxvYWRPcHRpb25Gb3JQcm9kdWN0Q2FyZCh0aGlzLmNvbnRleHQpO1xuICAgICAgICAvKiBBbmltYXRlIFNjcm9sbCovXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uU2Nyb2xsKCk7XG5cbiAgICAgICAgdGhpcy5nZXRCbG9nUG9zdEJ5VGFnKFwiLmJsb2ctdGFiLWNvbnRlbnRfX3Bvc3QtLXJlY2VuemlpXCIpO1xuICAgICAgICB0aGlzLmdldEJsb2dQb3N0QnlUYWcoXCIuYmxvZy10YWItY29udGVudF9fcG9zdC0tcmVjb21hbmRhcmlcIik7XG4gICAgICAgIHRoaXMuZ2V0QmxvZ1Bvc3RCeVRhZyhcIi5ibG9nLXRhYi1jb250ZW50X19wb3N0LS1pbmN1cmFqYXJlXCIpO1xuICAgICAgICB0aGlzLmdldEJsb2dQb3N0QnlUYWcoXCIuYmxvZy10YWItY29udGVudF9fcG9zdC0taW50ZXJ2aXVyaVwiKTtcblxuICAgICAgICB0aGlzLnZpZXdNb3JlQmxvZ0NhdGVnb3J5KCk7XG5cbiAgICAgICAgdGhpcy5nZXRUaW1lQmxvZygpO1xuXG4gICAgICAgIHRoaXMuc2ltaWxhckFydGljbGUoKTtcbiAgICB9XG5cbiAgICBsb2FkT3B0aW9uRm9yUHJvZHVjdENhcmQoY29udGV4dCl7XG4gICAgICAgIGlmKCQoJyNmZWF0dXJlZC1wcm9kdWN0cyAuY2FyZCcpLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgaGFsb0FkZE9wdGlvbkZvclByb2R1Y3QoY29udGV4dCwgJ2ZlYXR1cmVkLXByb2R1Y3RzJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiBBbmltYXRpb24gU2Nyb2xsICovXG4gICAgYW5pbWF0aW9uU2Nyb2xsKCl7XG4gICAgICAgIGxldCBpdGVtTGluayA9ICQoJy50YWItdGl0bGVfX2xpbmsnKTtcbiAgICAgICAgaWYgKCFpdGVtTGluaykgcmV0dXJuO1xuICAgICAgICBmb3IobGV0IGl0ZW0gb2YgaXRlbUxpbmspe1xuICAgICAgICAgICAgbGV0IHRhYlRpbGUgPSBpdGVtLmNsb3Nlc3QoJy50YWItdGl0bGVfX2l0ZW0nKTtcblxuICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIC8qIEFjdGl2ZSBUYWIgKi9cbiAgICAgICAgICAgICAgICBsZXQgdGFiVGlsZUFjdGl2ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YWItdGl0bGVfX2l0ZW0uYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgaWYodGFiVGlsZUFjdGl2ZSkgdGFiVGlsZUFjdGl2ZS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgICAgIHRhYlRpbGUuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgLyogU2Nyb2xsICovXG4gICAgICAgICAgICAgICAgbGV0IGl0ZW1IcmVmID0gaXRlbS5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTtcbiAgICAgICAgICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogKCQoaXRlbUhyZWYpLm9mZnNldCgpLnRvcCAtIDIwMClcbiAgICAgICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiBHZXQgUG9zdCBCeSBUYWcgTmFtZSovXG4gICAgZ2V0QmxvZ1Bvc3RCeVRhZyhlbGVtZW50Q2xhc3Mpe1xuICAgICAgICBsZXQgYmxvZ0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnRDbGFzcyksXG4gICAgICAgICAgICBibG9nU2VjdGlvbiA9IGJsb2dMaXN0Py5jbG9zZXN0KFwiLmJsb2ctdGFiX19jb250ZW50XCIpLFxuICAgICAgICAgICAgYmxvZ1VybCA9IGJsb2dTZWN0aW9uPy5xdWVyeVNlbGVjdG9yKFwiLmJsb2ctdGFiLWNvbnRlbnRfX2xpbmtcIikuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKTtcblxuICAgICAgICBpZiAoIWJsb2dMaXN0KSByZXR1cm47XG5cbiAgICAgICAgZmV0Y2goYmxvZ1VybClcbiAgICAgICAgICAgIC50aGVuIChyZXNwb25zZSA9PiByZXNwb25zZS50ZXh0KCkpXG4gICAgICAgICAgICAudGhlbiAoKGNvbnRlbnQpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBjb250ZW50O1xuXG4gICAgICAgICAgICAgICAgdmFyIG5ld0NvbnRlbnQgPSB0ZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKFwiLmJsb2ctY2F0YWdvcnktY29udGVudFwiKS5pbm5lckhUTUw7XG4gICAgICAgICAgICAgICAgYmxvZ0xpc3QuaW5uZXJIVE1MID0gbmV3Q29udGVudDtcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIC8qIFNob3cgOSBibG9nIHBvc3Qgb24gZGVza3RvcCAqL1xuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmKHdpbmRvdy5pbm5lcldpZHRoID4gNzY4KXtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJsb2dQb3N0ID0gYmxvZ1NlY3Rpb24ucXVlcnlTZWxlY3RvckFsbChcIi5ibG9nLXRhYi1jb250ZW50X19wb3N0IC5ibG9nXCIpO1xuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYmxvZ1Bvc3QubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoaSA+IDgpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2dQb3N0W2ldLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLyogU2hvdyAzIGJsb2cgcG9zdCBvbiBtb2JpbGUgKi9cbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZih3aW5kb3cuaW5uZXJXaWR0aCA8IDc2OCl7XG4gICAgICAgICAgICAgICAgICAgIGxldCBibG9nUG9zdCA9IGJsb2dTZWN0aW9uLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYmxvZy10YWItY29udGVudF9fcG9zdCAuYmxvZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGJsb2dQb3N0Lmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGkgPiAyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9nUG9zdFtpXS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAkKGVsZW1lbnRDbGFzcykuc2xpY2soe1xuICAgICAgICAgICAgICAgICAgICBpbmZpbml0ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMyxcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDMsXG4gICAgICAgICAgICAgICAgICAgIGFycm93czogZmFsc2UgLFxuICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRvdHM6IHRydWUsXG4gICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvKiBSZXNwb25zaXZlICovXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNpdmU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha3BvaW50OiA5MDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG90czogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha3BvaW50OiA3NjcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZVdpZHRoOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3RzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBkb3QgPSBibG9nU2VjdGlvbi5xdWVyeVNlbGVjdG9yQWxsKFwiLnNsaWNrLWRvdHMgbGlcIik7XG4gICAgICAgICAgICAgICAgZG90WzBdLmNsaWNrKCk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAvKiBTY3JvbGwgVG8gVG9wIEFmdGVyIENsaWNrIEFib3ZlICovXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLyogR2V0IFJlYWRpbmcgVGltZSAqL1xuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBoYWxvRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYmxvZy1wb3N0LmhhbG8tZGVzY3JpcHRpb24nKTtcblxuICAgICAgICAgICAgICAgIGZvciAobGV0IGRlc2NyaXB0aW9uIG9mIGhhbG9EZXNjcmlwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlc2NyaXB0aW9uVGV4dCA9IGRlc2NyaXB0aW9uLnRleHRDb250ZW50LnRyaW0oKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgZXh0cmFjdGVkVGV4dCA9IGRlc2NyaXB0aW9uVGV4dC5tYXRjaCgvKFxcZCtcXHNtaW5cXHNkZVxcc2NpdGl0KS9pKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4dHJhY3RlZFRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhY3RlZFRleHQgPSBleHRyYWN0ZWRUZXh0WzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmxvZ1Bvc3RCb2R5ID0gZGVzY3JpcHRpb24uY2xvc2VzdCgnLmJsb2ctcG9zdC1ib2R5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VzdG9tQmxvZ1JlYWRpbmcgPSBibG9nUG9zdEJvZHkucXVlcnlTZWxlY3RvcignLmN1c3RvbS1ibG9nLXJlYWRpbmcnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tQmxvZ1JlYWRpbmcudGV4dENvbnRlbnQgPSBleHRyYWN0ZWRUZXh0O1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbi50ZXh0Q29udGVudC5yZXBsYWNlKGV4dHJhY3RlZFRleHQsICcnKS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAvKiBHZXQgTWF0Y2hpbmcgVGFncyBmb3IgQ3VzdG9tIFBvc3QgRGV0YWlsIExheW91dCAqL1xuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBwb3N0RGV0YWlsQ3VzdG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jdXN0b20tcG9zdC1kZXRhaWwtbGF5b3V0XCIpO1xuXG4gICAgICAgICAgICAgICAgaWYocG9zdERldGFpbEN1c3RvbSkge1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBzaG93TWF0Y2hpbmdUYWdzKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogR2V0IEFsbCBUYWdzIG9mIHRoaXMgcG9zdCAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFncyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jdXN0b20tcG9zdC10YWdzIC5saW5rJyk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogR2V0IFRhZyBOYW1lICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFnTmFtZSA9IHRhZy5pbm5lclRleHQudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBGaW5kIERpdiB0aGUgc2FtZWUgd2l0aCB0YWcgbmFtZSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJlc3BvbmRpbmdEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmxvZy0nICsgdGFnTmFtZS50b0xvd2VyQ2FzZSgpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb3JyZXNwb25kaW5nRGl2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcnJlc3BvbmRpbmdEaXYuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHNob3dNYXRjaGluZ1RhZ3MoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3I6JywgZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICB2aWV3TW9yZUJsb2dDYXRlZ29yeSgpe1xuICAgICAgICBsZXQgdmlld01vcmVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvc3QtY2F0ZWdvcnktdmlld01vcmVcIik7XG4gICAgICAgIGxldCBibG9nTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYmxvZy1jYXRhZ29yeS1jb250ZW50XCIpO1xuICAgICAgICBcbiAgICAgICAgaWYoIXZpZXdNb3JlQnV0dG9uKSByZXR1cm47XG4gXG4gICAgICAgIHZpZXdNb3JlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICB2YXIgbmV4dFBhZ2UgPSAkKCcucGFnaW5hdGlvbi1pdGVtLS1jdXJyZW50JykubmV4dCgpLFxuICAgICAgICAgICAgICAgIGxpbmsgPSBuZXh0UGFnZS5maW5kKFwiYVwiKS5hdHRyKFwiaHJlZlwiKTtcblxuICAgICAgICAgICAgZmV0Y2gobGluaylcbiAgICAgICAgICAgICAgICAudGhlbiAocmVzcG9uc2UgPT4gcmVzcG9uc2UudGV4dCgpKVxuICAgICAgICAgICAgICAgIC50aGVuICgoY29udGVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBjb250ZW50O1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdDb250ZW50ID0gJChcIi5ibG9nLWNhdGFnb3J5LWNvbnRlbnQgLmJsb2dcIiwgJCh0ZW1wbGF0ZSkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3UGFnaW5hdGlvbiA9ICQoXCIucGFnaW5hdGlvbi1saXN0XCIsICQodGVtcGxhdGUpKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmKGxpbmspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoIG5ld0NvbnRlbnQgKS5hcHBlbmRUbyhibG9nTGlzdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgJCgnLnBhZ2luYXRpb24tbGlzdCcpLmh0bWwobmV3UGFnaW5hdGlvbik7XG4gICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgIC8qIFJlbW92ZSBWaWV3IE1vcmUgQnV0dG9uICovXG4gICAgICAgICAgICAgICAgLnRoZW4gKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5leHRQYWdpbmF0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wYWdpbmF0aW9uLWl0ZW0tLW5leHRcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIW5leHRQYWdpbmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9yZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvcjonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZ2V0VGltZUJsb2coKSB7XG4gICAgICAgIHZhciBoYWxvRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYmxvZy1wb3N0LmhhbG8tZGVzY3JpcHRpb24nKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhhbG9EZXNjcmlwdGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgZGVzY3JpcHRpb25UZXh0ID0gaGFsb0Rlc2NyaXB0aW9uW2ldLmlubmVySFRNTC50cmltKCk7XG5cbiAgICAgICAgICAgIHZhciBleHRyYWN0ZWRUZXh0ID0gZGVzY3JpcHRpb25UZXh0Lm1hdGNoKC8oXFxkK1xcc21pblxcc2RlXFxzY2l0aXQpL2kpO1xuXG4gICAgICAgICAgICBpZiAoZXh0cmFjdGVkVGV4dCkge1xuICAgICAgICAgICAgICAgIGV4dHJhY3RlZFRleHQgPSBleHRyYWN0ZWRUZXh0WzBdO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHZhciBibG9nUG9zdEJvZHkgPSBoYWxvRGVzY3JpcHRpb25baV0uY2xvc2VzdCgnLmJsb2cnKTtcbiAgICAgICAgICAgICAgICB2YXIgY3VzdG9tQmxvZ1JlYWRpbmcgPSBibG9nUG9zdEJvZHkucXVlcnlTZWxlY3RvcignLmN1c3RvbS1ibG9nLXJlYWRpbmcnKTtcblxuICAgICAgICAgICAgICAgIGN1c3RvbUJsb2dSZWFkaW5nLmlubmVySFRNTCA9IGV4dHJhY3RlZFRleHQ7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLyogUmVhZGluZyBUaW1lIGluIGJsb2cgZGV0YWlsIHBhZ2UgKi9cbiAgICAgICAgICAgICAgICBsZXQgYmxvZ0RldGFpbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYmxvZy1wb3N0LWRldGFpbCAucG9zdC1kZXRhaWxfX3RvcFwiKTtcblxuICAgICAgICAgICAgICAgIGlmKGJsb2dEZXRhaWwpe1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBjb252ZXJ0VGV4dFRvTWludXRlKHRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gLyhcXGQrKVxccyptaW5cXHMrZGVcXHMrY2l0aXQvO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSB0ZXh0Lm1hdGNoKHJlZ2V4KTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtaW51dGVzID0gcGFyc2VJbnQobWF0Y2hbMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgJHttaW51dGVzfSBtaW51dGVgO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBibG9nRGV0YWlsUmVhZGluZyA9IGJsb2dEZXRhaWwucXVlcnlTZWxlY3RvcignLmN1c3RvbS1ibG9nLXJlYWRpbmcnKTtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3UmVhZGluZ1RpbWUgPSBjb252ZXJ0VGV4dFRvTWludXRlKGV4dHJhY3RlZFRleHQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKGkgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvZ0RldGFpbFJlYWRpbmcuaW5uZXJIVE1MID0gY29udmVydFRleHRUb01pbnV0ZShleHRyYWN0ZWRUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGhhbG9EZXNjcmlwdGlvbltpXS5pbm5lckhUTUwgPSBoYWxvRGVzY3JpcHRpb25baV0uaW5uZXJIVE1MLnJlcGxhY2UoZXh0cmFjdGVkVGV4dCwgJycpLnRyaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNpbWlsYXJBcnRpY2xlKCkge1xuICAgICAgICBsZXQgc2ltaWxhclRhZ0xpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJsb2ctcG9zdC10YWdzIC50YWdzIC50YWcgLmxpbmtcIik/LmdldEF0dHJpYnV0ZShcImhyZWZcIik7XG5cbiAgICAgICAgaWYoIXNpbWlsYXJUYWdMaW5rKSByZXR1cm47XG5cbiAgICAgICAgZmV0Y2goc2ltaWxhclRhZ0xpbmspXG4gICAgICAgICAgICAudGhlbiAocmVzcG9uc2UgPT4gcmVzcG9uc2UudGV4dCgpKVxuICAgICAgICAgICAgLnRoZW4gKChjb250ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gY29udGVudDtcbiAgICAgICAgICAgICAgICB2YXIgbmV3Q29udGVudCA9IHRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoXCIjYmxvZy1saXN0aW5nLWNvbnRhaW5lciAuYmxvZy10YWJfX2NvbnRlbnQgLmJsb2ctY2F0YWdvcnktY29udGVudFwiKS5pbm5lckhUTUw7XG4gICAgICAgICAgICAgICAgbmV3Q29udGVudCA9IG5ld0NvbnRlbnQuc3BsaXQoXCI8bmF2XCIpWzBdO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2ltaWxhci1ibG9nX19saXN0XCIpLmlubmVySFRNTCA9IG5ld0NvbnRlbnQ7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBibG9nUG9zdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2ltaWxhcl9fd3JhcHBlciAuYmxvZ1wiKTtcbiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYmxvZ1Bvc3QubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICBpZihpID4gMil7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9nUG9zdFtpXS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIGhhbG9EZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaW1pbGFyX193cmFwcGVyIC5ibG9nLXBvc3QuaGFsby1kZXNjcmlwdGlvbicpO1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgZGVzY3JpcHRpb24gb2YgaGFsb0Rlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgZGVzY3JpcHRpb25UZXh0ID0gZGVzY3JpcHRpb24udGV4dENvbnRlbnQudHJpbSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBleHRyYWN0ZWRUZXh0ID0gZGVzY3JpcHRpb25UZXh0Lm1hdGNoKC8oXFxkK1xcc21pblxcc2RlXFxzY2l0aXQpL2kpO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoZXh0cmFjdGVkVGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFjdGVkVGV4dCA9IGV4dHJhY3RlZFRleHRbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBibG9nUG9zdEJvZHkgPSBkZXNjcmlwdGlvbi5jbG9zZXN0KCcuc2ltaWxhcl9fd3JhcHBlciAuYmxvZy1wb3N0LWJvZHknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXN0b21CbG9nUmVhZGluZyA9IGJsb2dQb3N0Qm9keS5xdWVyeVNlbGVjdG9yKCcuc2ltaWxhcl9fd3JhcHBlciAuY3VzdG9tLWJsb2ctcmVhZGluZycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21CbG9nUmVhZGluZy50ZXh0Q29udGVudCA9IGV4dHJhY3RlZFRleHQ7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uLnRleHRDb250ZW50LnJlcGxhY2UoZXh0cmFjdGVkVGV4dCwgJycpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNpbWlsYXItYmxvZ19fbGlzdCcpLnNsaWNrKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZmluaXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyb3dzOiBmYWxzZSAsXG4gICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBkb3RzOiB0cnVlLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBSZXNwb25zaXZlICovXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zaXZlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha3BvaW50OiA5MDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdHM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDc2NyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlV2lkdGg6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3RzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuICAgIH1cbiAgICBcbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vLyByZWY6IGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLWdsb2JhbFxudmFyIGdldEdsb2JhbCA9IGZ1bmN0aW9uICgpIHtcblx0Ly8gdGhlIG9ubHkgcmVsaWFibGUgbWVhbnMgdG8gZ2V0IHRoZSBnbG9iYWwgb2JqZWN0IGlzXG5cdC8vIGBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpYFxuXHQvLyBIb3dldmVyLCB0aGlzIGNhdXNlcyBDU1AgdmlvbGF0aW9ucyBpbiBDaHJvbWUgYXBwcy5cblx0aWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykgeyByZXR1cm4gc2VsZjsgfVxuXHRpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHsgcmV0dXJuIHdpbmRvdzsgfVxuXHRpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHsgcmV0dXJuIGdsb2JhbDsgfVxuXHR0aHJvdyBuZXcgRXJyb3IoJ3VuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdCcpO1xufVxuXG52YXIgZ2xvYmFsT2JqZWN0ID0gZ2V0R2xvYmFsKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cyA9IGdsb2JhbE9iamVjdC5mZXRjaDtcblxuLy8gTmVlZGVkIGZvciBUeXBlU2NyaXB0IGFuZCBXZWJwYWNrLlxuaWYgKGdsb2JhbE9iamVjdC5mZXRjaCkge1xuXHRleHBvcnRzLmRlZmF1bHQgPSBnbG9iYWxPYmplY3QuZmV0Y2guYmluZChnbG9iYWxPYmplY3QpO1xufVxuXG5leHBvcnRzLkhlYWRlcnMgPSBnbG9iYWxPYmplY3QuSGVhZGVycztcbmV4cG9ydHMuUmVxdWVzdCA9IGdsb2JhbE9iamVjdC5SZXF1ZXN0O1xuZXhwb3J0cy5SZXNwb25zZSA9IGdsb2JhbE9iamVjdC5SZXNwb25zZTtcbiJdLCJuYW1lcyI6WyJ1dGlscyIsIlBhZ2VNYW5hZ2VyIiwiaGFsb0FkZE9wdGlvbkZvclByb2R1Y3QiLCJoYWxvU2lkZWJhclRvZ2dsZSIsIkJsb2ciLCJfUGFnZU1hbmFnZXIiLCJfaW5oZXJpdHNMb29zZSIsImNvbnRleHQiLCJjYWxsIiwiX3Byb3RvIiwicHJvdG90eXBlIiwib25SZWFkeSIsImxvYWRPcHRpb25Gb3JQcm9kdWN0Q2FyZCIsImFuaW1hdGlvblNjcm9sbCIsImdldEJsb2dQb3N0QnlUYWciLCJ2aWV3TW9yZUJsb2dDYXRlZ29yeSIsImdldFRpbWVCbG9nIiwic2ltaWxhckFydGljbGUiLCIkIiwibGVuZ3RoIiwiaXRlbUxpbmsiLCJfbG9vcCIsIml0ZW0iLCJfc3RlcCIsInZhbHVlIiwidGFiVGlsZSIsImNsb3Nlc3QiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwidGFiVGlsZUFjdGl2ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsIml0ZW1IcmVmIiwiZ2V0QXR0cmlidXRlIiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsIm9mZnNldCIsInRvcCIsIl9pdGVyYXRvciIsIl9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UiLCJkb25lIiwiZWxlbWVudENsYXNzIiwiYmxvZ0xpc3QiLCJibG9nU2VjdGlvbiIsImJsb2dVcmwiLCJmZXRjaCIsInRoZW4iLCJyZXNwb25zZSIsInRleHQiLCJjb250ZW50IiwidGVtcGxhdGUiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwibmV3Q29udGVudCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJibG9nUG9zdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpIiwic2xpY2siLCJpbmZpbml0ZSIsInNsaWRlc1RvU2hvdyIsInNsaWRlc1RvU2Nyb2xsIiwiYXJyb3dzIiwiZHJhZ2dhYmxlIiwiZG90cyIsInJlc3BvbnNpdmUiLCJicmVha3BvaW50Iiwic2V0dGluZ3MiLCJ2YXJpYWJsZVdpZHRoIiwiZG90IiwiY2xpY2siLCJzY3JvbGxUbyIsImhhbG9EZXNjcmlwdGlvbiIsIl9pdGVyYXRvcjIiLCJfc3RlcDIiLCJkZXNjcmlwdGlvbiIsImRlc2NyaXB0aW9uVGV4dCIsInRleHRDb250ZW50IiwidHJpbSIsImV4dHJhY3RlZFRleHQiLCJtYXRjaCIsImJsb2dQb3N0Qm9keSIsImN1c3RvbUJsb2dSZWFkaW5nIiwicmVwbGFjZSIsInBvc3REZXRhaWxDdXN0b20iLCJzaG93TWF0Y2hpbmdUYWdzIiwidGFncyIsImZvckVhY2giLCJ0YWciLCJ0YWdOYW1lIiwiaW5uZXJUZXh0IiwiY29ycmVzcG9uZGluZ0RpdiIsImdldEVsZW1lbnRCeUlkIiwidG9Mb3dlckNhc2UiLCJzdHlsZSIsImRpc3BsYXkiLCJlcnJvciIsImNvbnNvbGUiLCJ2aWV3TW9yZUJ1dHRvbiIsIm5leHRQYWdlIiwibmV4dCIsImxpbmsiLCJmaW5kIiwiYXR0ciIsIm5ld1BhZ2luYXRpb24iLCJhcHBlbmRUbyIsImh0bWwiLCJuZXh0UGFnaW5hdGlvbiIsIl9sb29wMiIsImJsb2dEZXRhaWwiLCJjb252ZXJ0VGV4dFRvTWludXRlIiwicmVnZXgiLCJtaW51dGVzIiwicGFyc2VJbnQiLCJibG9nRGV0YWlsUmVhZGluZyIsIm5ld1JlYWRpbmdUaW1lIiwiX2RvY3VtZW50JHF1ZXJ5U2VsZWN0Iiwic2ltaWxhclRhZ0xpbmsiLCJzcGxpdCIsIl9pdGVyYXRvcjMiLCJfc3RlcDMiLCJyZWFkeSIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6IiJ9